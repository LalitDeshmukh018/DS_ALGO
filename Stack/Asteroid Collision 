// Collisions only occur when a right-moving asteroid meets a left-moving one.
// Use a stack to track surviving asteroids.
// Push positive asteroids since they cannot collide immediately.
// For a negative asteroid, resolve collisions with stack top:
// Destroy smaller asteroids.
// Destroy both if sizes are equal.
// Destroy the current asteroid if the stack top is larger.
// The stack finally contains all remaining asteroids in correct order.



class Solution {
    public int[] asteroidCollision(int[] nums) {
        int n = nums.length;
        Stack<Integer> st = new Stack<>();

        for (int i=0;i<n;i++){
            int val = nums[i];

            if (val > 0) st.push(val);
            else{
                boolean destroy = false;
                while (!st.isEmpty() && st.peek() >0){
                     if(st.peek() == - val) {
                        st.pop();
                        destroy = true;
                        break;
                     }
                     else if(st.peek() < -val){
                        st.pop();
                        continue;
                     }
                     else {
                        destroy = true;
                        break;
                     }
                }
                if(!destroy) st.push(val);
            }
        }
        int ans []= new int [st.size()];
        for (int i=ans.length-1;i>=0;i--){
            ans[i] = st.pop();
        }
        return ans;
    }
}
