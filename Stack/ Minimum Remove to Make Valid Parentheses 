// whenever it seems parenthesis always think for stack
// balance the open and close 
// thing to remember -> if "(" is there in stack and next is ")" the got balanced

// intution -> we just need to remove the unnecessay para
//              make use of the stack to find the unnecessay one 
//              we are stroing index in the stack instead of acutal para
//              coz we get to know which index para is not necessay 





class Solution {
    public String minRemoveToMakeValid(String s) {
        int n = s.length();
        Stack<Integer> st = new Stack<>();
        HashSet<Integer> set = new HashSet<>();

        for (int i=0;i<n;i++){
            char ch = s.charAt(i);
            if (ch == '(') st.push(i);
            if (ch == ')'){
                if(st.isEmpty()) set.add(i);
                else st.pop();
            }

        }
        StringBuilder sb = new StringBuilder();
        
        while (!st.isEmpty()){
            set.add(st.pop());
        }

        for (int i=0;i<n;i++){
            if(!set.contains(i)) sb.append(s.charAt(i));

        }
        return sb.toString();
    }
}







// another intutuin is -->>
//              that we are goint tpo traverss like a two pass
//              in first iteration we are traversing form left to rignt and maintian the opne bracket and add accordinly
//              and in the secind iteration we are traversing form right to left nad maintian the cliose bracket and make it dine accordingly


class Solution {
    public String minRemoveToMakeValid(String s) {
        int n = s.length();

        int open =0;
        int close=0;
        StringBuilder sb = new StringBuilder();

        for (char ch : s.toCharArray()){
            
            if(ch=='(') {
                open ++;
                sb.append(ch);
            }
            else if (ch == ')'){
                if (open >0){
                    open --;
                    sb.append(ch);
                }
            }
            else {
                sb.append(ch);
            }
        }

        StringBuilder res = new StringBuilder();

        for (int i = sb.length()-1;i>=0;i--){
            char ch = sb.charAt(i);

            if (ch == ')'){
                close ++;
                res.append(ch);
            }
            else if (ch =='('){
                if (close > 0){
                    close --;
                    res.append(ch);
                }

            }
            else res.append(ch);
        }
return res.reverse().toString();

       
    }
}